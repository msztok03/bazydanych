3)

CREATE FUNCTION sprawdz() RETURNS TRIGGER AS $$
DECLARE
	stare DECIMAL(18,2);
	nowe DECIMAL(18,2);
	zmiana DECIMAL(5,2);
BEGIN
	stare := OLD.TaxRate;
	nowe := NEW.TaxRate;
	zmiana := ABS((nowe-stare)/stare);
	IF zmiana > 0.3 THEN
		RAISE EXPECTION 'za duza zmiana'
	END IF;
	
	RETURN NEW;
END;
$$ LANGUAGE plpsql;

CREATE TRIGGER monitorowanie
BEFORE UPDATE ON sales.salestaxrate
FOR EACH ROW
EXECUTE FUNCTION sprawdz();\